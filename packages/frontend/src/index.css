@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Design Tokens — Dark Theme (default) ─────────────────────────────────── */
:root,
.dark {
  /* Backgrounds — three-level elevation */
  --color-bg-page:            #0f172a; /* slate-900   · global canvas     */
  --color-bg-surface:         #1e293b; /* slate-800   · cards & panels    */
  --color-bg-surface-raised:  #293548; /* slate-750   · nested cards      */
  --color-bg-interactive:     #334155; /* slate-700   · hover / chip / input */

  /* Brand — indigo for personality */
  --color-brand:              #6366f1; /* indigo-500  */
  --color-brand-hover:        #818cf8; /* indigo-400  */
  --color-brand-subtle:       rgba(99, 102, 241, 0.12);

  /* Accent — amber/gold from the ChessKeep logo */
  --color-accent:             #f59e0b; /* amber-500   */
  --color-accent-hover:       #fbbf24; /* amber-400   */

  /* Semantic feedback — pastel tones readable on dark bg */
  --color-danger:             #f87171; /* red-400     */
  --color-danger-hover:       #fca5a5; /* red-300     */
  --color-danger-subtle:      rgba(248, 113, 113, 0.12);
  --color-success:            #34d399; /* emerald-400 */
  --color-warning:            #fbbf24; /* amber-400   */

  /* Text hierarchy */
  --color-text-base:          #f1f5f9; /* slate-100   */
  --color-text-muted:         #94a3b8; /* slate-400   */
  --color-text-subtle:        #64748b; /* slate-500   */
  --color-text-on-brand:      #ffffff;

  /* Borders */
  --color-border-default:     #334155; /* slate-700   */
  --color-border-subtle:      #1e293b; /* slate-800   */

  /* Chess board */
  --color-chess-light:        #f0d9b5;
  --color-chess-dark:         #b58863;

  /* Shadows — dark bg: depth via colour contrast, minimal shadow */
  --shadow-sm:       0 1px 2px rgba(0, 0, 0, 0.45);
  --shadow-surface:  0 2px 8px  rgba(0, 0, 0, 0.45);
  --shadow-elevated: 0 12px 32px rgba(0, 0, 0, 0.6), 0 4px 12px rgba(0, 0, 0, 0.4);

  /* Scrollbar */
  --tw-scrollbar-thumb:       #475569; /* slate-600   */
  --tw-scrollbar-track:       #1e293b; /* slate-800   */
  --tw-scrollbar-thumb-hover: #64748b; /* slate-500   */

  /* Transitions */
  --transition-fast:   150ms;
  --transition-normal: 250ms;
  --transition-slow:   350ms;

  /* Context menu */
  --context-menu-bg:        #1e293b;
  --context-menu-text:      #f8fafc;
  --context-menu-hover-bg:  #334155;
  --context-menu-border:    #475569;
}

/* ─── Design Tokens — Light Theme ───────────────────────────────────────────── */
.light {
  /* Backgrounds — cool blue-gray base so white surfaces clearly pop */
  --color-bg-page:            #eef2f7; /* custom cool blue-gray           */
  --color-bg-surface:         #ffffff; /* pure white · cards pop on page  */
  --color-bg-surface-raised:  #f8fafc; /* slate-50   · inner elevation    */
  --color-bg-interactive:     #e2e8f0; /* slate-200  · hover / chip       */

  /* Brand — indigo for light backgrounds */
  --color-brand:              #4f46e5; /* indigo-600  */
  --color-brand-hover:        #4338ca; /* indigo-700  */
  --color-brand-subtle:       #eef2ff; /* indigo-50   */

  /* Accent */
  --color-accent:             #d97706; /* amber-600   */
  --color-accent-hover:       #b45309; /* amber-700   */

  /* Semantic feedback — deeper tones for legibility on light bg */
  --color-danger:             #dc2626; /* red-600     */
  --color-danger-hover:       #b91c1c; /* red-700     */
  --color-danger-subtle:      #fef2f2; /* red-50      */
  --color-success:            #059669; /* emerald-600 */
  --color-warning:            #d97706; /* amber-600   */

  /* Text — WCAG AA verified contrast ratios */
  --color-text-base:          #0f172a; /* slate-900   · 18.1:1 on white   */
  --color-text-muted:         #475569; /* slate-600   ·  7.1:1 on white   */
  --color-text-subtle:        #64748b; /* slate-500   ·  4.7:1 on white   */
  --color-text-on-brand:      #ffffff;

  /* Borders */
  --color-border-default:     #cbd5e1; /* slate-300   */
  --color-border-subtle:      #e2e8f0; /* slate-200   */

  /* Shadows — light theme uses drop shadows for depth hierarchy */
  --shadow-sm:       0 1px 3px rgba(15, 23, 42, 0.07), 0 1px 2px rgba(15, 23, 42, 0.04);
  --shadow-surface:  0 2px 10px rgba(15, 23, 42, 0.08), 0 1px 3px rgba(15, 23, 42, 0.05);
  --shadow-elevated: 0 10px 30px rgba(15, 23, 42, 0.11), 0 4px 10px rgba(15, 23, 42, 0.07);

  /* Scrollbar */
  --tw-scrollbar-thumb:       #94a3b8; /* slate-400   */
  --tw-scrollbar-track:       #e2e8f0; /* slate-200   */
  --tw-scrollbar-thumb-hover: #64748b; /* slate-500   */

  /* Context menu */
  --context-menu-bg:        #ffffff;
  --context-menu-text:      #0f172a;
  --context-menu-hover-bg:  #f1f5f9;
  --context-menu-border:    #e2e8f0;
}

/* ─── Base styles ────────────────────────────────────────────────────────────── */
body {
  background-color: var(--color-bg-page);
  color: var(--color-text-base);
  padding-bottom: env(safe-area-inset-bottom);
  margin: 0;
  padding: 0;
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--tw-scrollbar-thumb) var(--tw-scrollbar-track);
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: var(--tw-scrollbar-track);
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--tw-scrollbar-thumb);
  border-radius: 4px;
  transition: background-color var(--transition-fast) ease;
}

*::-webkit-scrollbar-thumb:hover {
  background-color: var(--tw-scrollbar-thumb-hover);
}

/* ─── Focus ring global reset (replaced by component-level focus-visible) ───── */
:focus {
  outline: none;
}

@layer components {
  .nav-link {
    @apply flex items-center w-full px-3 py-2 text-sm rounded-md text-text-muted hover:text-text-base hover:bg-interactive transition-colors duration-200;
  }

  /* Surface card — auto-adds shadow and border in both themes */
  .surface-card {
    @apply bg-surface border border-border-subtle rounded-xl;
    box-shadow: var(--shadow-surface);
  }
}

